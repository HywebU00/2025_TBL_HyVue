import{b as Q,f as X,c as ee,d as le}from"./VForm.b9a67e22.js";import{c as te,a as ne,d as $}from"./VInput.0285941b.js";import{f as ae}from"./forwardRefs.890e72a9.js";import{p as ue,aj as j,z as ie,aB as oe,G as se,e as r,f as C,F as re,aW as ce,a as u,m as I,N as V,aZ as M,O as de,aY as fe}from"./index.e09bead9.js";import{a as ve}from"./VChip.856045ba.js";import{u as me}from"./index.ea234e12.js";const pe=ue({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...te({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>j(e).every(v=>v!=null&&typeof v=="object")},...Q({clearable:!0})},"VFileInput"),be=ie()({name:"VFileInput",inheritAttrs:!1,props:pe(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,v){let{attrs:x,emit:g,slots:n}=v;const{t:k}=oe(),a=se(e,"modelValue",e.modelValue,l=>j(l),l=>!e.multiple&&Array.isArray(l)?l[0]:l),{isFocused:m,focus:D,blur:O}=ne(e),b=r(()=>typeof e.showSize!="boolean"?e.showSize:void 0),F=r(()=>{var l;return((l=a.value)!=null?l:[]).reduce((t,i)=>{let{size:c=0}=i;return t+c},0)}),S=r(()=>M(F.value,b.value)),y=r(()=>{var l;return((l=a.value)!=null?l:[]).map(t=>{const{name:i="",size:c=0}=t;return e.showSize?`${i} (${M(c,b.value)})`:i})}),E=r(()=>{var t,i;const l=(i=(t=a.value)==null?void 0:t.length)!=null?i:0;return e.showSize?k(e.counterSizeString,l,S.value):k(e.counterString,l)}),P=C(),z=C(),o=C(),U=r(()=>m.value||e.active),A=r(()=>["plain","underlined"].includes(e.variant));function h(){var l;o.value!==document.activeElement&&((l=o.value)==null||l.focus()),m.value||D()}function G(l){var t;(t=o.value)==null||t.click()}function L(l){g("mousedown:control",l)}function T(l){var t;(t=o.value)==null||t.click(),g("click:control",l)}function W(l){l.stopPropagation(),h(),de(()=>{a.value=[],fe(e["onClick:clear"],l)})}return re(a,l=>{(!Array.isArray(l)||!l.length)&&o.value&&(o.value.value="")}),me(()=>{const l=!!(n.counter||e.counter),t=!!(l||n.details),[i,c]=ce(x),{modelValue:ye,...Y}=$.filterProps(e),Z=X(e);return u($,I({ref:P,modelValue:a.value,"onUpdate:modelValue":d=>a.value=d,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":A.value},e.class],style:e.style,"onClick:prepend":G},i,Y,{centerAffix:!A.value,focused:m.value}),{...n,default:d=>{let{id:p,isDisabled:f,isDirty:w,isReadonly:B,isValid:_}=d;return u(ee,I({ref:z,"prepend-icon":e.prependIcon,onMousedown:L,onClick:T,"onClick:clear":W,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Z,{id:p.value,active:U.value||w.value,dirty:w.value||e.dirty,disabled:f.value,focused:m.value,error:_.value===!1}),{...n,default:q=>{var R;let{props:{class:H,...J}}=q;return u(V,null,[u("input",I({ref:o,type:"file",readonly:B.value,disabled:f.value,multiple:e.multiple,name:e.name,onClick:s=>{s.stopPropagation(),B.value&&s.preventDefault(),h()},onChange:s=>{var N;if(!s.target)return;const K=s.target;a.value=[...(N=K.files)!=null?N:[]]},onFocus:h,onBlur:O},J,c),null),u("div",{class:H},[!!((R=a.value)!=null&&R.length)&&!e.hideInput&&(n.selection?n.selection({fileNames:y.value,totalBytes:F.value,totalBytesReadable:S.value}):e.chips?y.value.map(s=>u(ve,{key:s,size:"small",text:s},null)):y.value.join(", "))])])}})},details:t?d=>{var p,f;return u(V,null,[(p=n.details)==null?void 0:p.call(n,d),l&&u(V,null,[u("span",null,null),u(le,{active:!!((f=a.value)!=null&&f.length),value:E.value,disabled:e.disabled},n.counter)])])}:void 0})}),ae({},P,z,o)}});export{be as V};
